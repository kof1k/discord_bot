# üéµ Discord + Telegram Music Bot

–ü–æ–≤–Ω–æ—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π –º—É–∑–∏—á–Ω–∏–π –±–æ—Ç –∑ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è–º —á–µ—Ä–µ–∑ Telegram, –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö PostgreSQL —Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è–º —Å—Ö–æ–≤–∏—â–µ–º.

## üìã –ó–º—ñ—Å—Ç

- [–ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ](#–º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ)
- [–í–∏–º–æ–≥–∏](#–≤–∏–º–æ–≥–∏)
- [–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è](#–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è)
- [–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è](#–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è)
- [–ó–∞–ø—É—Å–∫](#–∑–∞–ø—É—Å–∫)
- [–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è](#–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è)
- [–ö–æ–º–∞–Ω–¥–∏](#–∫–æ–º–∞–Ω–¥–∏)
- [–ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å](#–∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å)

## ‚ú® –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

### Discord –ë–æ—Ç
- üé∂ –í—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –º—É–∑–∏–∫–∏ –∑ YouTube —Ç–∞ SoundCloud
- üìú –ß–µ—Ä–≥–∞ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é –ø–µ—Ç–ª—ñ
- üîÄ –ü–µ—Ä–µ–º—ñ—à—É–≤–∞–Ω–Ω—è —Ç—Ä–µ–∫—ñ–≤
- ‚è∏Ô∏è –ü–∞—É–∑–∞/–ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è/–ø—Ä–æ–ø—É—Å–∫
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω—å

### Telegram –ë–æ—Ç
- üîΩ –°–∫–∞—á—É–≤–∞–Ω–Ω—è —Ç—Ä–µ–∫—ñ–≤ –∑ –≤—ñ–¥–ø—Ä–∞–≤–∫–æ—é —Ñ–∞–π–ª—ñ–≤
- üîç –ü–æ—à—É–∫ –º—É–∑–∏–∫–∏ –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö
- üìã –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–ª–µ–π–ª–∏—Å—Ç–∞–º–∏
- ‚≠ê –£–ª—é–±–ª–µ–Ω—ñ —Ç—Ä–µ–∫–∏
- üéÆ –ü–æ–≤–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è Discord –±–æ—Ç–æ–º
- üëë –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞ –ø–∞–Ω–µ–ª—å

### –ë–∞–∑–∞ –î–∞–Ω–∏—Ö
- üíæ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤—Å—ñ—Ö —Ç—Ä–µ–∫—ñ–≤
- üìä –î–µ—Ç–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω—å
- üë• –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏ —Ç–∞ –ø—Ä–∞–≤–∞–º–∏
- üóÑÔ∏è –ü–ª–µ–π–ª–∏—Å—Ç–∏ –∑ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—î—é

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è
- üßπ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Å—Ç–∞—Ä–∏—Ö —Ç—Ä–µ–∫—ñ–≤
- üìà –ó–±—ñ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- üîÑ –ü–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ –∑–∞–≤–¥–∞–Ω—å

## üõ†Ô∏è –í–∏–º–æ–≥–∏

### –ü—Ä–æ–≥—Ä–∞–º–Ω–µ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è
- **Node.js** v18+ ([–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏](https://nodejs.org/))
- **Python** 3.8+ ([–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏](https://www.python.org/))
- **PostgreSQL** 12+ ([–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏](https://www.postgresql.org/))
- **FFmpeg** ([–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏](https://ffmpeg.org/))

### –¢–æ–∫–µ–Ω–∏
- Discord Bot Token
- Telegram Bot Token

## üì¶ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

```bash
git clone <repository-url>
cd discord_bot
```

### 2. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Node.js –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

```bash
npm install
```

### 3. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Python –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

```bash
pip install yt-dlp
```

### 4. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è FFmpeg

**Ubuntu/Debian:**
```bash
sudo apt update
sudo apt install ffmpeg
```

**Windows (Chocolatey):**
```powershell
choco install ffmpeg -y
```

**macOS:**
```bash
brew install ffmpeg
```

### 5. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è PostgreSQL

**Ubuntu/Debian:**
```bash
sudo apt install postgresql postgresql-contrib
sudo systemctl start postgresql
sudo systemctl enable postgresql
```

**–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö:**
```bash
sudo -u postgres psql
```

–í psql –∫–æ–Ω—Å–æ–ª—ñ:
```sql
CREATE DATABASE music_bot;
CREATE USER music_bot_user WITH PASSWORD 'your_secure_password';
GRANT ALL PRIVILEGES ON DATABASE music_bot TO music_bot_user;
\q
```

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### 1. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Discord –±–æ—Ç–∞

1. –í—ñ–¥–≤—ñ–¥–∞–π—Ç–µ [Discord Developer Portal](https://discord.com/developers/applications)
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "New Application"
3. –î–∞–π—Ç–µ –Ω–∞–∑–≤—É —Ç–∞ —Å—Ç–≤–æ—Ä—ñ—Ç—å
4. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ —Ä–æ–∑–¥—ñ–ª **Bot**
5. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Add Bot"
6. **–í–ê–ñ–õ–ò–í–û:** –£–≤—ñ–º–∫–Ω—ñ—Ç—å **Message Content Intent**
7. –°–∫–æ–ø—ñ—é–π—Ç–µ —Ç–æ–∫–µ–Ω (Reset Token ‚Üí Copy)

### 2. –ó–∞–ø—Ä–æ—à–µ–Ω–Ω—è Discord –±–æ—Ç–∞

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ **OAuth2** ‚Üí **URL Generator**
2. –í–∏–±–µ—Ä—ñ—Ç—å scopes:
   - `bot`
   - `applications.commands`
3. –í–∏–±–µ—Ä—ñ—Ç—å Bot Permissions:
   - Send Messages
   - Embed Links
   - Connect
   - Speak
   - Use Voice Activity
4. –°–∫–æ–ø—ñ—é–π—Ç–µ URL —Ç–∞ –≤—ñ–¥–∫—Ä–∏–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ
5. –î–æ–¥–∞–π—Ç–µ –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### 3. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Telegram –±–æ—Ç–∞

1. –ó–Ω–∞–π–¥—ñ—Ç—å [@BotFather](https://t.me/botfather) –≤ Telegram
2. –ù–∞–¥—ñ—à–ª—ñ—Ç—å `/newbot`
3. –°–ª—ñ–¥—É–π—Ç–µ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è–º
4. –°–∫–æ–ø—ñ—é–π—Ç–µ —Ç–æ–∫–µ–Ω
5. –û—Ç—Ä–∏–º–∞–π—Ç–µ –≤–∞—à Telegram ID –≤—ñ–¥ [@userinfobot](https://t.me/userinfobot)

### 4. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ—î–∫—Ç—É:

```env
# Discord Bot
DISCORD_TOKEN=your_discord_bot_token_here

# Telegram Bot
TELEGRAM_TOKEN=your_telegram_bot_token_here
TELEGRAM_ADMIN_ID=your_telegram_user_id

# PostgreSQL Database
DB_HOST=localhost
DB_PORT=5432
DB_NAME=music_bot
DB_USER=music_bot_user
DB_PASSWORD=your_secure_password

# Music Storage
MUSIC_DIR=./music
TEMP_DIR=./downloads

# Settings
MAX_STORAGE_GB=180
CLEANUP_DAYS=7
CLEANUP_ENABLED=true
CLEANUP_SCHEDULE=0 3 * * *
```

### 5. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

```bash
npm run init-db
```

–í–∏ –ø–æ–±–∞—á–∏—Ç–µ —Å–ø–∏—Å–æ–∫ —Å—Ç–≤–æ—Ä–µ–Ω–∏—Ö —Ç–∞–±–ª–∏—Ü—å. –Ø–∫—â–æ –≤—Å–µ –û–ö - –ø—Ä–æ–¥–æ–≤–∂—É–π—Ç–µ.

## üöÄ –ó–∞–ø—É—Å–∫

### –†–µ–∂–∏–º —Ä–æ–∑—Ä–æ–±–∫–∏ (–æ–±–∏–¥–≤–∞ –±–æ—Ç–∏ —Ä–∞–∑–æ–º)

```bash
npm run dev
```

### –û–∫—Ä–µ–º–∏–π –∑–∞–ø—É—Å–∫

**Discord –±–æ—Ç:**
```bash
npm start
```

**Telegram –±–æ—Ç:**
```bash
npm run telegram
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è

```bash
npm run cleanup
```

## üì± –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### Telegram –ë–æ—Ç

1. –ó–Ω–∞–π–¥—ñ—Ç—å –≤–∞—à–æ–≥–æ –±–æ—Ç–∞ –≤ Telegram
2. –ù–∞–¥—ñ—à–ª—ñ—Ç—å `/start`
3. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∫–æ–º–∞–Ω–¥–∏ –∞–±–æ –ø—Ä–æ—Å—Ç–æ –Ω–∞–¥—ñ—à–ª—ñ—Ç—å –Ω–∞–∑–≤—É –ø—ñ—Å–Ω—ñ

**–ü—Ä–∏–∫–ª–∞–¥–∏:**
```
/download Never Gonna Give You Up
/search Imagine Dragons
/playlists
/discord
```

–ê–±–æ –ø—Ä–æ—Å—Ç–æ:
```
Metallica Nothing Else Matters
```

### Discord –ë–æ—Ç

–ü—Ä–∏—î–¥–Ω–∞–π—Ç–µ—Å—å –¥–æ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∫–∞–Ω–∞–ª—É —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∫–æ–º–∞–Ω–¥–∏:

```
!play Daft Punk - Get Lucky
!queue
!skip
!loop
```

### –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è Discord —á–µ—Ä–µ–∑ Telegram

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Telegram –±–æ—Ç–∞
2. –ù–∞–¥—ñ—à–ª—ñ—Ç—å `/discord`
3. –í–∏–±–µ—Ä—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä
4. –í–∏–±–µ—Ä—ñ—Ç—å –≥–æ–ª–æ—Å–æ–≤–∏–π –∫–∞–Ω–∞–ª
5. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ü—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—å"
6. –¢–µ–ø–µ—Ä –º–æ–∂–µ—Ç–µ –∫–µ—Ä—É–≤–∞—Ç–∏ –º—É–∑–∏–∫–æ—é —á–µ—Ä–µ–∑ Telegram!

## üìù –ö–æ–º–∞–Ω–¥–∏

### Discord –ö–æ–º–∞–Ω–¥–∏

| –ö–æ–º–∞–Ω–¥–∞ | –ê–ª—ñ–∞—Å | –û–ø–∏—Å |
|---------|-------|------|
| `!play <–∑–∞–ø–∏—Ç>` | `!p` | –í—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ —Ç—Ä–µ–∫ |
| `!pause` | - | –ü–∞—É–∑–∞ |
| `!resume` | - | –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ |
| `!skip` | `!s` | –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ |
| `!stop` | - | –ó—É–ø–∏–Ω–∏—Ç–∏ |
| `!queue` | `!q` | –ü–æ–∫–∞–∑–∞—Ç–∏ —á–µ—Ä–≥—É |
| `!nowplaying` | `!np` | –ü–æ—Ç–æ—á–Ω–∏–π —Ç—Ä–µ–∫ |
| `!shuffle` | - | –ü–µ—Ä–µ–º—ñ—à–∞—Ç–∏ |
| `!loop` | - | –ü–µ—Ç–ª—è |
| `!leave` | - | –í–∏–π—Ç–∏ –∑ –∫–∞–Ω–∞–ª—É |
| `!help` | `!h` | –î–æ–≤—ñ–¥–∫–∞ |

### Telegram –ö–æ–º–∞–Ω–¥–∏

#### –ú—É–∑–∏–∫–∞
- `/download <–Ω–∞–∑–≤–∞>` - –°–∫–∞—á–∞—Ç–∏ —Ç—Ä–µ–∫
- `/search <–∑–∞–ø–∏—Ç>` - –ü–æ—à—É–∫
- `/get <ID>` - –û—Ç—Ä–∏–º–∞—Ç–∏ —Ç—Ä–µ–∫
- `/popular` - –ü–æ–ø—É–ª—è—Ä–Ω—ñ —Ç—Ä–µ–∫–∏

#### –ü–ª–µ–π–ª–∏—Å—Ç–∏
- `/playlists` - –ú–æ—ó –ø–ª–µ–π–ª–∏—Å—Ç–∏
- `/create_playlist` - –°—Ç–≤–æ—Ä–∏—Ç–∏
- `/playlist <ID>` - –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏
- `/popular_playlists` - –ü—É–±–ª—ñ—á–Ω—ñ

#### Discord
- `/discord` - –ú–µ–Ω—é —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è
- `/servers` - –í–∏–±—Ä–∞—Ç–∏ —Å–µ—Ä–≤–µ—Ä
- `/channels` - –í–∏–±—Ä–∞—Ç–∏ –∫–∞–Ω–∞–ª–∏
- `/join` - –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—å

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `/stats` - –ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

## üëë –ê–¥–º—ñ–Ω –ü–∞–Ω–µ–ª—å

–î–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ —Ä–æ–ª–ª—é `admin` (–Ω–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ `TELEGRAM_ADMIN_ID`).

### –ö–æ–º–∞–Ω–¥–∏ –∞–¥–º—ñ–Ω–∞

- `/admin` - –ì–æ–ª–æ–≤–Ω–∞ –ø–∞–Ω–µ–ª—å
- `/users` - –°–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- `/storage` - –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Å—Ö–æ–≤–∏—â–µ
- `/cleanup` - –û—á–∏—Å—Ç–∏—Ç–∏ —Å—Ç–∞—Ä—ñ —Ç—Ä–µ–∫–∏
- `/promote <user_id>` - –ó—Ä–æ–±–∏—Ç–∏ –∞–¥–º—ñ–Ω–æ–º
- `/demote <user_id>` - –ó–∞–±—Ä–∞—Ç–∏ –ø—Ä–∞–≤–∞

### –§—É–Ω–∫—Ü—ñ—ó –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—ñ

**–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ:**
- –ü–µ—Ä–µ–≥–ª—è–¥ —Å–ø–∏—Å–∫—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ä–æ–ª—è–º–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º

**–°—Ö–æ–≤–∏—â–µ:**
- –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –¥–∏—Å–∫—É
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ñ–∞–π–ª—ñ–≤
- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –ë–î

**–¢—Ä–µ–∫–∏:**
- –ü–µ—Ä–µ–≥–ª—è–¥ –æ—Å—Ç–∞–Ω–Ω—ñ—Ö —Ç—Ä–µ–∫—ñ–≤
- –í–∏–¥–∞–ª–µ–Ω–Ω—è –Ω–µ–∞–∫—Ç–∏–≤–Ω–∏—Ö
- –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ë–î

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –ó–∞–≥–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ—Ç–∞
- –ü—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω–Ω—è –∑–∞ –¥–µ–Ω—å
- –ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

## üßπ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –û—á–∏—â–µ–Ω–Ω—è

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–¥–∞–ª—è—î —Ç—Ä–µ–∫–∏, —è–∫—ñ:
- –ù–µ —Å–ª—É—Ö–∞–ª–∏—Å—å –ø–æ–Ω–∞–¥ `CLEANUP_DAYS` –¥–Ω—ñ–≤ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 7)
- –ù–µ –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è –≤ –∂–æ–¥–Ω–æ–º—É –ø–ª–µ–π–ª–∏—Å—Ç—ñ
- –ù–µ –¥–æ–¥–∞–Ω—ñ –≤ —É–ª—é–±–ª–µ–Ω–µ

–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤ `.env`:
```env
CLEANUP_ENABLED=true          # –£–≤—ñ–º–∫–Ω—É—Ç–∏ –∞–≤—Ç–æ–æ—á–∏—â–µ–Ω–Ω—è
CLEANUP_DAYS=7                # –î–Ω—ñ–≤ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
CLEANUP_SCHEDULE=0 3 * * *    # –ö–æ–∂–µ–Ω –¥–µ–Ω—å –æ 3:00
```

–†—É—á–Ω–∏–π –∑–∞–ø—É—Å–∫:
```bash
npm run cleanup
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ—î–∫—Ç—É

```
discord_bot/
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ config.js           # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ schema.sql          # SQL —Å—Ö–µ–º–∞
‚îÇ   ‚îî‚îÄ‚îÄ models/             # –ú–æ–¥–µ–ª—ñ –¥–∞–Ω–∏—Ö
‚îÇ       ‚îú‚îÄ‚îÄ Track.js
‚îÇ       ‚îú‚îÄ‚îÄ User.js
‚îÇ       ‚îú‚îÄ‚îÄ Playlist.js
‚îÇ       ‚îî‚îÄ‚îÄ PlayHistory.js
‚îú‚îÄ‚îÄ telegram/
‚îÇ   ‚îú‚îÄ‚îÄ admin.js            # –ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ playlists.js        # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–ª–µ–π–ª–∏—Å—Ç–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ discord-control.js  # –ö–µ—Ä—É–≤–∞–Ω–Ω—è Discord
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ init-database.js    # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ cleanup-tracks.js   # –û—á–∏—â–µ–Ω–Ω—è —Ç—Ä–µ–∫—ñ–≤
‚îú‚îÄ‚îÄ music/                  # –ü–æ—Å—Ç—ñ–π–Ω–µ —Å—Ö–æ–≤–∏—â–µ –º—É–∑–∏–∫–∏
‚îú‚îÄ‚îÄ downloads/              # –¢–∏–º—á–∞—Å–æ–≤—ñ —Ñ–∞–π–ª–∏
‚îú‚îÄ‚îÄ index.js                # Discord –±–æ—Ç
‚îú‚îÄ‚îÄ telegram-bot.js         # Telegram –±–æ—Ç
‚îú‚îÄ‚îÄ downloader.py           # –ó–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—á –º—É–∑–∏–∫–∏
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ .env                    # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
```

## üêõ –í–∏—Ä—ñ—à–µ–Ω–Ω—è –ü—Ä–æ–±–ª–µ–º

### Discord –±–æ—Ç –Ω–µ –≤—ñ–¥—Ç–≤–æ—Ä—é—î –º—É–∑–∏–∫—É

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ FFmpeg: `ffmpeg -version`
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∞ –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
3. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å —â–æ –±–æ—Ç –≤ –≥–æ–ª–æ—Å–æ–≤–æ–º—É –∫–∞–Ω–∞–ª—ñ

### –ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –ë–î

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –∑–∞–ø—É—â–µ–Ω–æ PostgreSQL:
   ```bash
   sudo systemctl status postgresql
   ```

2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–∞–Ω—ñ –≤ `.env`

3. –°–ø—Ä–æ–±—É–π—Ç–µ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—å –≤—Ä—É—á–Ω—É:
   ```bash
   psql -h localhost -U music_bot_user -d music_bot
   ```

### –ü–æ–º–∏–ª–∫–∞ —Å–∫–∞—á—É–≤–∞–Ω–Ω—è —Ç—Ä–µ–∫—ñ–≤

–û–Ω–æ–≤—ñ—Ç—å yt-dlp:
```bash
pip install -U yt-dlp
```

### Telegram –±–æ—Ç –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ç–æ–∫–µ–Ω –≤ `.env`
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω–æ
3. –ü–æ–¥–∏–≤—ñ—Ç—å—Å—è –ª–æ–≥–∏ –Ω–∞ –ø–æ–º–∏–ª–∫–∏

## üìä –ë–∞–∑–∞ –î–∞–Ω–∏—Ö

### –¢–∞–±–ª–∏—Ü—ñ

- **users** - –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ (Telegram + Discord)
- **tracks** - –ú—É–∑–∏—á–Ω—ñ —Ñ–∞–π–ª–∏
- **playlists** - –ü–ª–µ–π–ª–∏—Å—Ç–∏
- **playlist_tracks** - –¢—Ä–µ–∫–∏ –≤ –ø–ª–µ–π–ª–∏—Å—Ç–∞—Ö
- **play_history** - –Ü—Å—Ç–æ—Ä—ñ—è –ø—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω—å
- **user_favorites** - –£–ª—é–±–ª–µ–Ω—ñ —Ç—Ä–µ–∫–∏
- **discord_guilds** - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä—ñ–≤
- **bot_statistics** - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ—Ç–∞

### –†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è

```bash
pg_dump -U music_bot_user music_bot > backup.sql
```

### –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è

```bash
psql -U music_bot_user music_bot < backup.sql
```

## üîê –ë–µ–∑–ø–µ–∫–∞

1. **–ù—ñ–∫–æ–ª–∏** –Ω–µ –≤–∏–∫–ª–∞–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª
2. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Å–∫–ª–∞–¥–Ω—ñ –ø–∞—Ä–æ–ª—ñ –¥–ª—è –ë–î
3. –û–±–º–µ–∂—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ –ë–î (—Ç—ñ–ª—å–∫–∏ localhost)
4. –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–Ω–æ–≤–ª—é–π—Ç–µ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
   ```bash
   npm update
   pip install -U yt-dlp
   ```

## üìà –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞

**–ú—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ:**
- CPU: 2 cores
- RAM: 2GB
- –î–∏—Å–∫: 20GB + –º—ñ—Å—Ü–µ –¥–ª—è –º—É–∑–∏–∫–∏

**–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ:**
- CPU: 4 cores
- RAM: 4GB
- –î–∏—Å–∫: 200GB SSD

### –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è

1. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ SSD –¥–ª—è –ë–î
2. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ PostgreSQL –¥–ª—è –≤–∞—à–æ–≥–æ –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è
3. –†–µ–≥—É–ª—è—Ä–Ω–æ –æ—á–∏—â—É–π—Ç–µ —Å—Ç–∞—Ä—ñ —Ç—Ä–µ–∫–∏
4. –ú–æ–Ω—ñ—Ç–æ—Ä—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –¥–∏—Å–∫—É

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT License

## ü§ù –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–ª–∏ –ø–∏—Ç–∞–Ω–Ω—è –∞–±–æ –ø—Ä–æ–±–ª–µ–º–∏:

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [–í–∏—Ä—ñ—à–µ–Ω–Ω—è –ü—Ä–æ–±–ª–µ–º](#–≤–∏—Ä—ñ—à–µ–Ω–Ω—è-–ø—Ä–æ–±–ª–µ–º)
2. –ü–æ–¥–∏–≤—ñ—Ç—å—Å—è –ª–æ–≥–∏ –±–æ—Ç—ñ–≤
3. –°—Ç–≤–æ—Ä—ñ—Ç—å issue –Ω–∞ GitHub

---

–†–æ–∑—Ä–æ–±–ª–µ–Ω–æ –∑ ‚ù§Ô∏è –¥–ª—è –º—É–∑–∏–∫–∏ —Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó
